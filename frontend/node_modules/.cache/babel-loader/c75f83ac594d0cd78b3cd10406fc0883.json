{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.url.js\";\nimport \"core-js/modules/web.url-search-params.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from '@/plugins/axios';\nexport default {\n  data: function data() {\n    return {\n      blog: {},\n      error: null,\n      images: [],\n      // array of image\n      titleBlog: \"\",\n      contentBlog: \"\",\n      pinnedBlog: false,\n      statusBlog: \"01\"\n    };\n  },\n  methods: {\n    selectImages: function selectImages(event) {\n      this.images = event.target.files;\n    },\n    showSelectImage: function showSelectImage(image) {\n      // for preview only\n      return URL.createObjectURL(image);\n    },\n    deleteSelectImage: function deleteSelectImage(index) {\n      console.log(this.images);\n      this.images = Array.from(this.images);\n      this.images.splice(index, 1);\n    },\n    submitBlog: function submitBlog() {\n      var _this = this;\n\n      var formData = new FormData();\n      formData.append(\"title\", this.titleBlog);\n      formData.append(\"content\", this.contentBlog);\n      formData.append(\"pinned\", this.pinnedBlog ? 1 : 0);\n      formData.append(\"status\", \"01\");\n      this.images.forEach(function (image) {\n        formData.append(\"myImage\", image);\n      }); // Note ***************\n      // ตอนเรายิง Postmant จะใช้ fromData\n      // ตอนยิงหลาย ๆ รูปพร้อมกันใน Postman จะเป็นแบบนี้\n      // title   | \"This is a title of blog\"\n      // comment | \"comment in blog\"\n      // ...\n      // myImage | [select file 1]\n      // myImage | [select file 2]\n      // myImage | [select file 3]\n      // จะสังเกตุว่าใช้ myImage เป็น key เดียวกัน เลยต้องเอามา loop forEach\n      // พอไปฝั่ง backend มันจะจัด file ให้เป็น Array เพื่อเอาไปใช้งานต่อได้\n\n      axios.post(\"http://localhost:3000/blogs\", formData).then(function (res) {\n        return _this.$router.push({\n          name: 'home'\n        });\n      }).catch(function (e) {\n        return console.log(e.response.data);\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuFA;AAEA;AACAA,MADA,kBACA;AACA;AACAC,cADA;AAEAC,iBAFA;AAGAC,gBAHA;AAGA;AACAC,mBAJA;AAKAC,qBALA;AAMAC,uBANA;AAOAC;AAPA;AASA,GAXA;AAYAC;AACAC,gBADA,wBACAC,KADA,EACA;AACA;AACA,KAHA;AAIAC,mBAJA,2BAIAC,KAJA,EAIA;AACA;AACA;AACA,KAPA;AAQAC,qBARA,6BAQAC,KARA,EAQA;AACAC;AACA;AACA;AACA,KAZA;AAaAC,cAbA,wBAaA;AAAA;;AACA;AACAC;AACAA;AACAA;AACAA;AACA;AACAA;AACA,OAFA,EANA,CAUA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;AAEAC,YACAC,IADA,CACA,6BADA,EACAF,QADA,EAEAG,IAFA,CAEA;AAAA;AAAAC;AAAA;AAAA,OAFA,EAGAC,KAHA,CAGA;AAAA;AAAA,OAHA;AAIA;AAzCA;AAZA","names":["data","blog","error","images","titleBlog","contentBlog","pinnedBlog","statusBlog","methods","selectImages","event","showSelectImage","image","deleteSelectImage","index","console","submitBlog","formData","axios","post","then","name","catch"],"sourceRoot":"src/views","sources":["CreateMovies.vue"],"sourcesContent":["<template>\r\n  <div class=\"container is-widescreen\">\r\n    <section class=\"section\" v-if=\"error\">\r\n      <div class=\"container is-widescreen\">\r\n        <div class=\"notification is-danger\">\r\n          <!-- <%= error.code + ': ' + error.sqlMessage %> -->\r\n          <!---->\r\n          {{ error }}\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <section class=\"hero\">\r\n      <div class=\"hero-body\">\r\n        <p class=\"title\">Create new Blog</p>\r\n      </div>\r\n    </section>\r\n    <section class=\"px-6\">\r\n      <input\r\n        class=\"mb-5\"\r\n        multiple\r\n        type=\"file\"\r\n        accept=\"image/png, image/jpeg, image/webp\"\r\n        @change=\"selectImages\"\r\n      />\r\n\r\n      <div v-if=\"images\" class=\"columns is-multiline\">\r\n        <div v-for=\"(image, index) in images\" :key=\"image.id\" class=\"column is-one-quarter\">\r\n          <div class=\"card\">\r\n            <div class=\"card-image\">\r\n              <figure class=\"image is-4by3\">\r\n                <img :src=\"showSelectImage(image)\" alt=\"Placeholder image\" />\r\n              </figure>\r\n            </div>\r\n            <footer class=\"card-footer\">\r\n              <a @click=\"deleteSelectImage(index)\" class=\"card-footer-item has-text-danger\">Delete</a>\r\n            </footer>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"field mt-5\">\r\n        <label class=\"label\">Title</label>\r\n        <div class=\"control\">\r\n          <input v-model=\"titleBlog\" class=\"input\" type=\"text\" placeholder=\"Text input\" />\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"field\">\r\n        <label class=\"label\">Content</label>\r\n        <div class=\"control\">\r\n          <textarea v-model=\"contentBlog\" class=\"textarea\" placeholder=\"Textarea\"></textarea>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"control mb-3\">\r\n        <label class=\"radio\">\r\n          <input v-model=\"statusBlog\" type=\"radio\" name=\"answer\" value=\"01\" />\r\n          Private\r\n        </label>\r\n        <label class=\"radio\">\r\n          <input v-model=\"statusBlog\" type=\"radio\" name=\"answer\" value=\"02\" />\r\n          Public\r\n        </label>\r\n      </div>\r\n\r\n      <div class=\"field\">\r\n        <div class=\"control\">\r\n          <label class=\"checkbox\">\r\n            <input v-model=\"pinnedBlog\" type=\"checkbox\" />\r\n            Pinned\r\n          </label>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"field is-grouped\">\r\n        <div class=\"control\">\r\n          <button @click=\"submitBlog\" class=\"button is-link\">Submit</button>\r\n        </div>\r\n        <div class=\"control\">\r\n          <button @click=\"$router.go(-1)\" class=\"button is-link is-light\">Cancel</button>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from '@/plugins/axios'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      blog: {},\r\n      error: null,\r\n      images: [], // array of image\r\n      titleBlog: \"\",\r\n      contentBlog: \"\",\r\n      pinnedBlog: false,\r\n      statusBlog: \"01\",\r\n    };\r\n  },\r\n  methods: {\r\n    selectImages(event) {\r\n      this.images = event.target.files;\r\n    },\r\n    showSelectImage(image) {\r\n      // for preview only\r\n      return URL.createObjectURL(image);\r\n    },\r\n    deleteSelectImage(index) {\r\n      console.log(this.images);\r\n      this.images = Array.from(this.images);\r\n      this.images.splice(index, 1);\r\n    },\r\n    submitBlog() {\r\n      let formData = new FormData();\r\n      formData.append(\"title\", this.titleBlog);\r\n      formData.append(\"content\", this.contentBlog);\r\n      formData.append(\"pinned\", this.pinnedBlog ? 1 : 0);\r\n      formData.append(\"status\", \"01\");\r\n      this.images.forEach((image) => {\r\n        formData.append(\"myImage\", image);\r\n      });\r\n\r\n      // Note ***************\r\n      // ตอนเรายิง Postmant จะใช้ fromData\r\n      // ตอนยิงหลาย ๆ รูปพร้อมกันใน Postman จะเป็นแบบนี้\r\n\r\n      // title   | \"This is a title of blog\"\r\n      // comment | \"comment in blog\"\r\n      // ...\r\n      // myImage | [select file 1]\r\n      // myImage | [select file 2]\r\n      // myImage | [select file 3]\r\n\r\n      // จะสังเกตุว่าใช้ myImage เป็น key เดียวกัน เลยต้องเอามา loop forEach\r\n      // พอไปฝั่ง backend มันจะจัด file ให้เป็น Array เพื่อเอาไปใช้งานต่อได้\r\n\r\n      axios\r\n        .post(\"http://localhost:3000/blogs\", formData)\r\n        .then((res) => this.$router.push({name: 'home'}))\r\n        .catch((e) => console.log(e.response.data));\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]},"metadata":{},"sourceType":"module"}