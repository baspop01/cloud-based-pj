{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"@/plugins/axios\";\nimport { required, minLength, sameAs } from \"vuelidate/lib/validators\";\nexport default {\n  name: \"app\",\n  props: [\"user\"],\n  data: function data() {\n    return {\n      passwordModal: false,\n      password: \"\",\n      newpassword: \"\",\n      confirm_password: \"\",\n      confirm_newpassword: \"\",\n      email: \"\",\n      name: \"\",\n      phone: \"\",\n      err: \"\",\n      success: null\n    };\n  },\n  mounted: function mounted() {\n    window.scrollTo(0, 0);\n  },\n  created: function created() {\n    this.getProfile();\n  },\n  methods: {\n    ChangePassword: function ChangePassword() {\n      var _this = this;\n\n      var id = this.$route.params.id;\n\n      if (this.newpassword != this.confirm_password) {\n        this.err = \"รหัสผ่านใหม่ไม่ตรงกัน\";\n      } else {\n        axios.put(\"/user/change/\".concat(id), {\n          password: this.password,\n          newpassword: this.newpassword\n        }).then(function (res) {\n          _this.err = res.data;\n\n          if (_this.err != \"รหัสผ่านไม่ถูกต้อง\") {\n            _this.passwordModal = false;\n            _this.err = null;\n            _this.success = res.data;\n            _this.password = \"\", _this.newpassword = \"\", _this.confirm_password = \"\";\n          } else if (_this.err == \"รหัสผ่านไม่ถูกต้อง\") {\n            _this.err = res.data;\n            _this.success = null;\n          }\n        });\n      }\n    },\n    getProfile: function getProfile() {\n      this.email = this.user.email_id;\n      this.name = this.user.c_name;\n      this.phone = this.user.phone_no;\n    }\n  },\n  validations: {\n    password: {\n      required: required,\n      minLength: minLength(8),\n      complex: complexPassword\n    },\n    confirm_password: {\n      sameAs: sameAs(\"password\")\n    },\n    c_name: {\n      maxLength: maxLength(150),\n      required: required\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgHA;AACA;AACA;AACAA,aADA;AAEAC,iBAFA;AAGAC,MAHA,kBAGA;AACA;AACAC,0BADA;AAEAC,kBAFA;AAGAC,qBAHA;AAIAC,0BAJA;AAKAC,6BALA;AAMAC,eANA;AAOAR,cAPA;AAQAS,eARA;AASAC,aATA;AAUAC;AAVA;AAYA,GAhBA;AAiBAC,SAjBA,qBAiBA;AACAC;AACA,GAnBA;AAoBAC,SApBA,qBAoBA;AACA;AACA,GAtBA;AAuBAC;AACAC,kBADA,4BACA;AAAA;;AACA;;AACA;AACA;AACA,OAFA,MAEA;AACAC,cACAC,GADA,wBACAC,EADA,GACA;AACAf,iCADA;AAEAC;AAFA,SADA,EAKAe,IALA,CAKA;AACA;;AACA;AACA;AACA;AACA;AACA,iCACA,sBADA,EAEA,2BAFA;AAGA,WAPA,MAOA;AACA;AACA;AACA;AACA,SAlBA;AAmBA;AACA,KA1BA;AA2BAC,cA3BA,wBA2BA;AACA;AACA;AACA;AACA;AA/BA,GAvBA;AAwDAC;AACAlB;AACAmB,wBADA;AAEAC,6BAFA;AAGAC;AAHA,KADA;AAMAnB;AACAoB;AADA,KANA;AASAC;AACAC,+BADA;AAEAL;AAFA;AATA;AAxDA","names":["name","props","data","passwordModal","password","newpassword","confirm_password","confirm_newpassword","email","phone","err","success","mounted","window","created","methods","ChangePassword","axios","put","id","then","getProfile","validations","required","minLength","complex","sameAs","c_name","maxLength"],"sourceRoot":"src/views","sources":["Profile.vue"],"sourcesContent":["<template>\r\n  <div class=\"container is-widescreen\">\r\n    <section class=\"section\" id=\"app\">\r\n      <p class=\"title has-text-white has-text-left\">My Profile</p>\r\n      <div class=\"column has-background-white p-5 is-size-4\">\r\n        <div class=\"card-image m-5 p-5 has-text-center\">\r\n          <figure>\r\n            <!-- ไว้ใส่รูป -->\r\n            <img\r\n              style=\"width: 180px; height: 100%\"\r\n              src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/2048px-Circle-icons-profile.svg.png\"\r\n              alt=\"Placeholder image\"\r\n            />\r\n          </figure>\r\n        </div>\r\n        <div class=\"columns has-text-left\">\r\n          <div class=\"column is-5\">\r\n            <p>Name</p>\r\n            <input\r\n              class=\"input is-hovered\"\r\n              type=\"text\"\r\n              v-model=\"name\"\r\n              disabled\r\n            />\r\n          </div>\r\n          <div class=\"column is-5\">\r\n            <p>Phone Number</p>\r\n            <input\r\n              class=\"input is-hovered\"\r\n              type=\"text\"\r\n              v-model=\"phone\"\r\n              placeholder=\"Hovered input\"\r\n              disabled\r\n            />\r\n          </div>\r\n        </div>\r\n        <div class=\"columns has-text-left\">\r\n          <div class=\"column is-5\">\r\n            <p>Email</p>\r\n            <input\r\n              class=\"input is-hovered\"\r\n              type=\"text\"\r\n              v-model=\"email\"\r\n              placeholder=\"Hovered input\"\r\n              disabled\r\n            />\r\n          </div>\r\n        </div>\r\n        <div class=\"columns has-text-left\">\r\n          <div class=\"column is-5\">\r\n            <div class=\"buttons\">\r\n              <button\r\n                class=\"button is-info\"\r\n                @click=\"passwordModal = !passwordModal\"\r\n              >\r\n                Change password\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <p v-if=\"success\" class=\"has-text-success is-size-7\">{{ success }}</p>\r\n        <br />\r\n        <div class=\"column\" v-if=\"passwordModal == true\">\r\n          <div class=\"columns\">\r\n            <div class=\"column is-3\">\r\n              <p class=\"is-size-6\">Old Password</p>\r\n              <input\r\n                class=\"input is-hovered is-small\"\r\n                type=\"password\"\r\n                v-model=\"password\"\r\n                placeholder=\"Old password\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"columns\">\r\n            <div class=\"column is-3\">\r\n              <p class=\"is-size-6\">New Password</p>\r\n              <input\r\n                class=\"input is-hovered is-small\"\r\n                type=\"password\"\r\n                v-model=\"newpassword\"\r\n                placeholder=\"New password\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"columns\">\r\n            <div class=\"column is-3\">\r\n              <p class=\"is-size-6\">Confirm Password</p>\r\n              <input\r\n                class=\"input is-hovered is-small\"\r\n                type=\"password\"\r\n                v-model=\"confirmpassword\"\r\n                placeholder=\"Confirm password\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <p v-if=\"err\" class=\"has-text-danger is-size-7\">*{{ err }}</p>\r\n          <br />\r\n          <div class=\"buttons\">\r\n            <button class=\"button is-success\" @click=\"ChangePassword()\">\r\n              Change\r\n            </button>\r\n            <button class=\"button is-danger\" @click=\"passwordModal = false\">\r\n              Cancel\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </div>\r\n</template>\r\n<script>\r\nimport axios from \"@/plugins/axios\";\r\nimport { required, minLength, sameAs } from \"vuelidate/lib/validators\";\r\nexport default {\r\n  name: \"app\",\r\n  props: [\"user\"],\r\n  data() {\r\n    return {\r\n      passwordModal: false,\r\n      password: \"\",\r\n      newpassword: \"\",\r\n      confirm_password: \"\",\r\n      confirm_newpassword: \"\",\r\n      email: \"\",\r\n      name: \"\",\r\n      phone: \"\",\r\n      err: \"\",\r\n      success: null,\r\n    };\r\n  },\r\n  mounted() {\r\n    window.scrollTo(0, 0);\r\n  },\r\n  created() {\r\n    this.getProfile();\r\n  },\r\n  methods: {\r\n    ChangePassword() {\r\n      var id = this.$route.params.id;\r\n      if (this.newpassword != this.confirm_password) {\r\n        this.err = \"รหัสผ่านใหม่ไม่ตรงกัน\";\r\n      } else {\r\n        axios\r\n          .put(`/user/change/${id}`, {\r\n            password: this.password,\r\n            newpassword: this.newpassword,\r\n          })\r\n          .then((res) => {\r\n            this.err = res.data;\r\n            if (this.err != \"รหัสผ่านไม่ถูกต้อง\") {\r\n              this.passwordModal = false;\r\n              this.err = null;\r\n              this.success = res.data;\r\n              (this.password = \"\"),\r\n                (this.newpassword = \"\"),\r\n                (this.confirm_password = \"\");\r\n            } else if (this.err == \"รหัสผ่านไม่ถูกต้อง\") {\r\n              this.err = res.data;\r\n              this.success = null;\r\n            }\r\n          });\r\n      }\r\n    },\r\n    getProfile() {\r\n      this.email = this.user.email_id;\r\n      this.name = this.user.c_name;\r\n      this.phone = this.user.phone_no;\r\n    },\r\n  },\r\n  validations: {\r\n    password: {\r\n      required: required,\r\n      minLength: minLength(8),\r\n      complex: complexPassword,\r\n    },\r\n    confirm_password: {\r\n      sameAs: sameAs(\"password\"),\r\n    },\r\n    c_name: {\r\n      maxLength: maxLength(150),\r\n      required: required,\r\n    },\r\n  },\r\n}\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}