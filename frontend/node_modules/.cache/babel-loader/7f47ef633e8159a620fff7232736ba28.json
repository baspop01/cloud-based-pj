{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport Vue from 'vue';\nimport VueRouter from 'vue-router';\nVue.use(VueRouter);\nvar routes = [{\n  path: '/',\n  name: 'Home',\n  meta: {\n    login: true\n  },\n  component: function component() {\n    return import('../views/Home.vue');\n  } // set home as path '/'\n\n}, {\n  path: '/movie/:id',\n  name: 'Book Ticket',\n  meta: {\n    login: true\n  },\n  component: function component() {\n    return import('../views/movie.vue');\n  }\n}, {\n  path: '/user/login',\n  name: 'login',\n  meta: {\n    guess: true\n  },\n  component: function component() {\n    return import('../views/Login.vue');\n  }\n}, {\n  path: '/booking/:orderId',\n  name: 'Confirm Ticket',\n  meta: {\n    login: true\n  },\n  component: function component() {\n    return import('../views/Booking.vue');\n  }\n}, {\n  path: '/profile/:cid',\n  name: 'My profile',\n  meta: {\n    login: true\n  },\n  component: function component() {\n    return import('../views/Profile.vue');\n  }\n}, {\n  path: '/profile/myorder/:cid',\n  name: 'My Order',\n  meta: {\n    login: true\n  },\n  component: function component() {\n    return import('../views/Order.vue');\n  }\n}];\nvar router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes: routes\n});\nrouter.beforeEach(function (to, from, next) {\n  var isLoggedIn = !!localStorage.getItem('token');\n\n  if (to.meta.login && !isLoggedIn) {\n    alert('Please login first!');\n    next({\n      path: '/user/login'\n    });\n  }\n\n  if (to.meta.guess && isLoggedIn) {\n    alert(\"You've already logged in\");\n    next({\n      path: '/'\n    });\n  }\n\n  next();\n});\nexport default router;","map":{"version":3,"sources":["D:/Work/ปี2เทอม2/webpro/BIG-PROJECT/frontend/src/router/index.js"],"names":["Vue","VueRouter","use","routes","path","name","meta","login","component","guess","router","mode","base","process","env","BASE_URL","beforeEach","to","from","next","isLoggedIn","localStorage","getItem","alert"],"mappings":";;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AAEAD,GAAG,CAACE,GAAJ,CAAQD,SAAR;AACA,IAAME,MAAM,GAAG,CACb;AACEC,EAAAA,IAAI,EAAE,GADR;AAEEC,EAAAA,IAAI,EAAE,MAFR;AAGEC,EAAAA,IAAI,EAAE;AAAEC,IAAAA,KAAK,EAAE;AAAT,GAHR;AAIEC,EAAAA,SAAS,EAAE;AAAA,WAAM,OAAO,mBAAP,CAAN;AAAA,GAJb,CAI+C;;AAJ/C,CADa,EAOb;AACEJ,EAAAA,IAAI,EAAE,YADR;AAEEC,EAAAA,IAAI,EAAE,aAFR;AAGEC,EAAAA,IAAI,EAAE;AAAEC,IAAAA,KAAK,EAAE;AAAT,GAHR;AAIEC,EAAAA,SAAS,EAAE;AAAA,WAAM,OAAO,oBAAP,CAAN;AAAA;AAJb,CAPa,EAab;AACEJ,EAAAA,IAAI,EAAE,aADR;AAEEC,EAAAA,IAAI,EAAE,OAFR;AAGEC,EAAAA,IAAI,EAAE;AAAEG,IAAAA,KAAK,EAAE;AAAT,GAHR;AAIED,EAAAA,SAAS,EAAE;AAAA,WAAM,OAAO,oBAAP,CAAN;AAAA;AAJb,CAba,EAmBb;AACEJ,EAAAA,IAAI,EAAE,mBADR;AAEEC,EAAAA,IAAI,EAAE,gBAFR;AAGEC,EAAAA,IAAI,EAAE;AAAEC,IAAAA,KAAK,EAAE;AAAT,GAHR;AAIEC,EAAAA,SAAS,EAAE;AAAA,WAAM,OAAO,sBAAP,CAAN;AAAA;AAJb,CAnBa,EAyBb;AACEJ,EAAAA,IAAI,EAAE,eADR;AAEEC,EAAAA,IAAI,EAAE,YAFR;AAGEC,EAAAA,IAAI,EAAE;AAAEC,IAAAA,KAAK,EAAE;AAAT,GAHR;AAIEC,EAAAA,SAAS,EAAE;AAAA,WAAM,OAAO,sBAAP,CAAN;AAAA;AAJb,CAzBa,EA+Bb;AACEJ,EAAAA,IAAI,EAAE,uBADR;AAEEC,EAAAA,IAAI,EAAE,UAFR;AAGEC,EAAAA,IAAI,EAAE;AAAEC,IAAAA,KAAK,EAAE;AAAT,GAHR;AAIEC,EAAAA,SAAS,EAAE;AAAA,WAAM,OAAO,oBAAP,CAAN;AAAA;AAJb,CA/Ba,CAAf;AAwCA,IAAME,MAAM,GAAG,IAAIT,SAAJ,CAAc;AAC3BU,EAAAA,IAAI,EAAE,SADqB;AAE3BC,EAAAA,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,QAFS;AAG3BZ,EAAAA,MAAM,EAANA;AAH2B,CAAd,CAAf;AAKAO,MAAM,CAACM,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpC,MAAMC,UAAU,GAAG,CAAC,CAACC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAArB;;AACA,MAAIL,EAAE,CAACX,IAAH,CAAQC,KAAR,IAAiB,CAACa,UAAtB,EAAkC;AAChCG,IAAAA,KAAK,CAAC,qBAAD,CAAL;AACAJ,IAAAA,IAAI,CAAC;AAAEf,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAJ;AACD;;AACD,MAAIa,EAAE,CAACX,IAAH,CAAQG,KAAR,IAAiBW,UAArB,EAAiC;AAC/BG,IAAAA,KAAK,CAAC,0BAAD,CAAL;AACAJ,IAAAA,IAAI,CAAC;AAAEf,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAJ;AACD;;AAEDe,EAAAA,IAAI;AACL,CAZD;AAeA,eAAeT,MAAf","sourcesContent":["import Vue from 'vue'\r\nimport VueRouter from 'vue-router'\r\n\r\nVue.use(VueRouter)\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    name: 'Home',\r\n    meta: { login: true },\r\n    component: () => import('../views/Home.vue') // set home as path '/'\r\n  },\r\n  {\r\n    path: '/movie/:id',\r\n    name: 'Book Ticket',\r\n    meta: { login: true },\r\n    component: () => import('../views/movie.vue')\r\n  },\r\n  {\r\n    path: '/user/login',\r\n    name: 'login',\r\n    meta: { guess: true },\r\n    component: () => import('../views/Login.vue')\r\n  },\r\n  {\r\n    path: '/booking/:orderId',\r\n    name: 'Confirm Ticket',\r\n    meta: { login: true },\r\n    component: () => import('../views/Booking.vue')\r\n  },\r\n  {\r\n    path: '/profile/:cid',\r\n    name: 'My profile',\r\n    meta: { login: true},\r\n    component: () => import('../views/Profile.vue')\r\n  },\r\n  {\r\n    path: '/profile/myorder/:cid',\r\n    name: 'My Order',\r\n    meta: { login: true},\r\n    component: () => import('../views/Order.vue')\r\n  }\r\n]\r\n\r\n\r\nconst router = new VueRouter({\r\n  mode: 'history',\r\n  base: process.env.BASE_URL,\r\n  routes\r\n})\r\nrouter.beforeEach((to, from, next) => {\r\n  const isLoggedIn = !!localStorage.getItem('token')\r\n  if (to.meta.login && !isLoggedIn) {\r\n    alert('Please login first!')\r\n    next({ path: '/user/login' })\r\n  }\r\n  if (to.meta.guess && isLoggedIn) {\r\n    alert(\"You've already logged in\")\r\n    next({ path: '/'})\r\n  }\r\n\r\n  next()\r\n})\r\n\r\n\r\nexport default router\r\n"]},"metadata":{},"sourceType":"module"}