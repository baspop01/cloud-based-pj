{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from '@/plugins/axios';\nimport { required, minLength, sameAs } from \"vuelidate/lib/validators\";\nexport default {\n  name: \"app\",\n  props: [\"user\"],\n  data: function data() {\n    return {\n      passwordModal: false,\n      oldpassword: \"\",\n      newpassword: \"\",\n      confirmpassword: \"\",\n      email: \"\",\n      name: \"\",\n      phone: \"\",\n      err: \"\",\n      success: null\n    };\n  },\n  mounted: function mounted() {\n    window.scrollTo(0, 0);\n  },\n  created: function created() {\n    this.getProfile();\n  },\n  methods: {\n    ChangPassword: function ChangPassword() {\n      var _this = this;\n\n      var id = this.$route.params.id;\n\n      if (this.newpassword != this.confirmpassword) {\n        this.err = \"รหัสผ่านใหม่ไม่ตรงกัน\";\n      } else {\n        axios.put(\"/user/change/\".concat(id), {\n          oldpassword: this.oldpassword,\n          newpassword: this.newpassword\n        }).then(function (res) {\n          _this.err = res.data;\n\n          if (_this.err != \"รหัสผ่านไม่ถูกต้อง\") {\n            _this.passwordModal = false;\n            _this.err = null;\n            _this.success = res.data;\n            _this.oldpassword = \"\", _this.newpassword = \"\", _this.confirmpassword = \"\";\n          } else if (_this.err == \"รหัสผ่านไม่ถูกต้อง\") {\n            _this.err = res.data;\n            _this.success = null;\n          }\n        });\n      }\n    },\n    getProfile: function getProfile() {\n      this.email = this.user.email_id;\n      this.name = this.user.c_name;\n      this.phone = this.user.phone_no;\n    },\n    submit: function submit() {\n      var _this2 = this;\n\n      // Validate all fields\n      this.$v.$touch(); // เช็คว่าในฟอร์มไม่มี error\n\n      if (!this.$v.$invalid) {\n        var data = {\n          newpassword: this.password,\n          confirm_password: this.confirm_password,\n          email: this.email,\n          mobile: this.mobile,\n          c_name: this.c_name\n        };\n        axios.post(\"http://localhost:3000/user/signup\", data).then(function (res) {\n          console.log(res);\n          alert(\"Sign up Success\");\n\n          _this2.$router.push({\n            path: \"/user/login\"\n          });\n        }).catch(function (err) {\n          alert(err.response.data.details.message);\n        });\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA,SACAA,QADA,EAEAC,SAFA,EAGAC,MAHA,QAIA,0BAJA;AAKA;AACAC,aADA;AAEAC,iBAFA;AAGAC,MAHA,kBAGA;AACA;AACAC,0BADA;AAEAC,qBAFA;AAGAC,qBAHA;AAIAC,yBAJA;AAKAC,eALA;AAMAP,cANA;AAOAQ,eAPA;AAQAC,aARA;AASAC;AATA;AAWA,GAfA;AAgBAC,SAhBA,qBAgBA;AACAC;AACA,GAlBA;AAmBAC,SAnBA,qBAmBA;AACA;AACA,GArBA;AAsBAC;AACAC,iBADA,2BACA;AAAA;;AACA;;AACA;AACA;AACA,OAFA,MAEA;AACAC;AACAZ,uCADA;AAEAC;AAFA,WAIAY,IAJA,CAIA;AACA;;AACA;AACA;AACA;AACA;AACA,oCACA,sBADA,EAEA,0BAFA;AAGA,WAPA,MAOA;AACA;AACA;AACA;AACA,SAjBA;AAkBA;AACA,KAzBA;AA0BAC,cA1BA,wBA0BA;AACA;AACA;AACA;AACA,KA9BA;AA+BAC,UA/BA,oBA+BA;AAAA;;AACA;AACA,uBAFA,CAIA;;AACA;AACA;AACAd,oCADA;AAEAe,iDAFA;AAGAb,2BAHA;AAIAc,6BAJA;AAKAC;AALA;AAQAN,cACAO,IADA,CACA,mCADA,EACArB,IADA,EAEAe,IAFA,CAEA;AACAO;AACAC;;AACA;AAAAC;AAAA;AACA,SANA,EAOAC,KAPA,CAOA;AACAF;AACA,SATA;AAUA;AACA;AAxDA;AAtBA","names":["required","minLength","sameAs","name","props","data","passwordModal","oldpassword","newpassword","confirmpassword","email","phone","err","success","mounted","window","created","methods","ChangPassword","axios","then","getProfile","submit","confirm_password","mobile","c_name","post","console","alert","path","catch"],"sourceRoot":"src/views","sources":["Profile.vue"],"sourcesContent":["<template>\r\n  <div class=\"container is-widescreen\">\r\n    <section class=\"section\" id=\"app\">\r\n      <p class=\"title has-text-white has-text-left\">My Profile</p>\r\n      <div class=\"column has-background-white p-5 is-size-4\">\r\n        <div class=\"card-image m-5 p-5 has-text-center\">\r\n           <figure>\r\n                  <!-- ไว้ใส่รูป -->\r\n                  <img style=\" width: 180px; height: 100%\"\r\n                    src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/2048px-Circle-icons-profile.svg.png\"\r\n                    alt=\"Placeholder image\"\r\n                  />\r\n            </figure>\r\n        </div>\r\n        <div class=\"columns has-text-left\">\r\n            <div class=\"column is-5\">\r\n            <p> Name</p><input class=\"input is-hovered\" type=\"text\" v-model=\"name\" disabled/>\r\n            </div>\r\n             <div class=\"column is-5\">\r\n            <p> Phone Number</p><input class=\"input is-hovered\" type=\"text\" v-model=\"phone\" placeholder=\"Hovered input\" disabled/>\r\n            </div>\r\n        </div>\r\n        <div class=\"columns has-text-left\">\r\n            <div class=\"column is-5\">\r\n            <p> Email</p><input class=\"input is-hovered\" type=\"text\" v-model=\"email\" placeholder=\"Hovered input\" disabled/>\r\n            </div>\r\n        </div>\r\n        <div class=\"columns has-text-left\">\r\n             <div class=\"column is-5\">\r\n                <div class=\"buttons\">\r\n                     <button class=\"button is-info\" @click=\"passwordModal = !passwordModal\">Change password</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <p v-if=\"success\" class=\"has-text-success is-size-7\">{{success}}</p><br>\r\n        <div class=\"column\" v-if=\"passwordModal == true\">\r\n            <div class=\"columns\">\r\n                <div class=\"column is-3\">\r\n                <p class=\"is-size-6\"> Old Password</p><input class=\"input is-hovered is-small\" type=\"password\" v-model=\"oldpassword\" placeholder=\"Old password\" />\r\n                </div>\r\n            </div>\r\n            <div class=\"columns\">\r\n                <div class=\"column is-3\">\r\n                <p class=\"is-size-6\"> New Password</p><input class=\"input is-hovered is-small\" type=\"password\" v-model=\"newpassword\" placeholder=\"New password\"/>\r\n                </div>\r\n            </div>\r\n            <div class=\"columns\">\r\n                <div class=\"column is-3\">\r\n                <p class=\"is-size-6\"> Confirm Password</p><input class=\"input is-hovered is-small\" type=\"password\" v-model=\"confirmpassword\" placeholder=\"Confirm password\"/>\r\n                </div>\r\n            </div>\r\n            <p v-if=\"err\" class=\"has-text-danger is-size-7\">*{{err}}</p><br>\r\n            <div class=\"buttons\">\r\n                <button class=\"button is-success\" @click=\"ChangPassword()\">Change</button>\r\n                <button class=\"button is-danger\" @click=\"passwordModal = false\">Cancel</button>\r\n            </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </div>\r\n</template>\r\n<script>\r\nimport axios from '@/plugins/axios'\r\nimport {\r\n  required,\r\n  minLength,\r\n  sameAs,\r\n} from \"vuelidate/lib/validators\";\r\nexport default {\r\n  name: \"app\",\r\n  props: [\"user\"],\r\n  data() {\r\n    return {\r\n        passwordModal : false,\r\n        oldpassword: \"\",\r\n        newpassword: \"\",\r\n        confirmpassword: \"\",\r\n        email: \"\",\r\n        name: \"\",\r\n        phone: \"\",\r\n        err: \"\",\r\n        success: null,\r\n    };\r\n  },\r\n  mounted() {\r\n      window.scrollTo(0, 0)\r\n  },\r\n  created() {\r\n    this.getProfile()\r\n  },\r\n  methods: {\r\n      ChangPassword(){\r\n          var id = this.$route.params.id\r\n          if (this.newpassword != this.confirmpassword){\r\n              this.err = \"รหัสผ่านใหม่ไม่ตรงกัน\"\r\n          }else{\r\n            axios.put(`/user/change/${id}`, {\r\n                oldpassword: this.oldpassword,\r\n                newpassword: this.newpassword\r\n            })\r\n            .then((res) => {\r\n                this.err = res.data\r\n                if (this.err != \"รหัสผ่านไม่ถูกต้อง\"){\r\n                    this.passwordModal = false\r\n                    this.err = null\r\n                    this.success = res.data\r\n                    this.oldpassword = \"\",\r\n                    this.newpassword = \"\",\r\n                    this.confirmpassword = \"\"\r\n                }else if(this.err == \"รหัสผ่านไม่ถูกต้อง\"){\r\n                    this.err = res.data\r\n                    this.success = null\r\n                }\r\n            });\r\n          }\r\n      },\r\n      getProfile(){\r\n          this.email = this.user.email_id\r\n          this.name = this.user.c_name\r\n          this.phone = this.user.phone_no\r\n      },\r\n      submit() {\r\n      // Validate all fields\r\n      this.$v.$touch();\r\n\r\n      // เช็คว่าในฟอร์มไม่มี error\r\n      if (!this.$v.$invalid) {\r\n        let data = {\r\n          newpassword: this.password,\r\n          confirm_password: this.confirm_password,\r\n          email: this.email,\r\n          mobile: this.mobile,\r\n          c_name: this.c_name,\r\n        };\r\n\r\n        axios\r\n          .post(\"http://localhost:3000/user/signup\", data)\r\n          .then((res) => {\r\n            console.log(res);\r\n            alert(\"Sign up Success\");\r\n            this.$router.push({ path: \"/user/login\" });\r\n          })\r\n          .catch((err) => {\r\n            alert(err.response.data.details.message);\r\n          });\r\n      }\r\n    }\r\n  },\r\n};\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}